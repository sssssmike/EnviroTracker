{"ast":null,"code":"var _jsxFileName = \"/Users/smike/Documents/GitHub/442-Group-3-Spring-2023/Code/enviro_tracker/src/Components/Map.js\",\n  _s = $RefreshSig$();\nimport React, { useMemo, useEffect, useState } from \"react\";\nimport { MapContainer } from 'react-leaflet/MapContainer';\nimport { Marker } from 'react-leaflet/Marker';\nimport { Popup } from 'react-leaflet/Popup';\nimport { TileLayer } from 'react-leaflet/TileLayer';\nimport { useMap } from 'react-leaflet/hooks';\nimport \"../CSS/Map.css\";\nimport { getLiveData, generateMockData } from \"../db/dbFuncs.ts\";\nimport { db } from \"../db/dbInstance\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MapDiv() {\n  _s();\n  // This whole code block is temporary AF this pulls the data from the DB\n  // ideally this should be a part of some scheduler i.e. once an hour\n  const [data, setData] = useState();\n\n  // useEffect(() => {\n  //   async function pullData() {\n  //     let d = await getLiveData(db);\n\n  //     setData(d);\n  //   };\n\n  //   pullData();\n\n  // }, []);\n  // End of concurrent database querying\n\n  // {\n  //   \"IePlFjuMpgFnGvKZDRgi\": {\n  //       \"long\": \"-87.64712811866409\",\n  //       \"data\": {\n  //           \"pm25\": \"44\",\n  //           \"voc\": \"12\",\n  //           \"temp\": \"33\",\n  //           \"CO2\": \"25\",\n  //           \"ozone\": \"125\",\n  //           \"humidity\": \"92\"\n  //       },\n  //       \"timestamp\": \"2/13/2023\",\n  //       \"lat\": \"41.86579351612219\"\n  //   }\n  // }\n\n  // Understand this and you will understand the meaning of life\n  useEffect(() => {\n    // changed to use memo so it doesn't wait for a render\n    setData(generateMockData()); // set the data on the initial load\n  }, []);\n\n  // access data, make sure its loaded first though\n  if (data != undefined) {\n    console.log(data); // you'll notice this stuff prints twice, since React.Strict is on it will render twice\n    // console.log(data[\"KONGDOG\"]); // see -> shorturl.at/cwER3  \n    // console.log(data[\"KONGDOG\"][\"long\"]); // etc. etc...\n    // console.log(data[\"KONGDOG\"][\"data\"][\"pm25\"]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    children: /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: [41.86877130657323, -87.64863209188573],\n      zoom: 16,\n      scrollWheelZoom: false,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: [41.86877130657323, -87.64863209188573],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"University of Illinois-Chicago\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(MapDiv, \"WZ2PO9A64oHRexE1CE+yX3ebuoA=\");\n_c = MapDiv;\nexport default MapDiv;\nvar _c;\n$RefreshReg$(_c, \"MapDiv\");","map":{"version":3,"names":["React","useMemo","useEffect","useState","MapContainer","Marker","Popup","TileLayer","useMap","getLiveData","generateMockData","db","MapDiv","data","setData","undefined","console","log"],"sources":["/Users/smike/Documents/GitHub/442-Group-3-Spring-2023/Code/enviro_tracker/src/Components/Map.js"],"sourcesContent":["import React, { useMemo, useEffect, useState } from \"react\";\nimport { MapContainer } from 'react-leaflet/MapContainer'\nimport { Marker } from 'react-leaflet/Marker'\nimport { Popup } from 'react-leaflet/Popup'\nimport { TileLayer } from 'react-leaflet/TileLayer'\nimport { useMap } from 'react-leaflet/hooks'\n\nimport \"../CSS/Map.css\";\n\nimport { getLiveData, generateMockData } from \"../db/dbFuncs.ts\"\nimport { db } from \"../db/dbInstance\"\n\nfunction MapDiv() {\n  \n  // This whole code block is temporary AF this pulls the data from the DB\n  // ideally this should be a part of some scheduler i.e. once an hour\n  const [data, setData] = useState();\n\n  // useEffect(() => {\n  //   async function pullData() {\n  //     let d = await getLiveData(db);\n    \n  //     setData(d);\n  //   };\n\n  //   pullData();\n\n  // }, []);\n  // End of concurrent database querying\n\n  // {\n  //   \"IePlFjuMpgFnGvKZDRgi\": {\n  //       \"long\": \"-87.64712811866409\",\n  //       \"data\": {\n  //           \"pm25\": \"44\",\n  //           \"voc\": \"12\",\n  //           \"temp\": \"33\",\n  //           \"CO2\": \"25\",\n  //           \"ozone\": \"125\",\n  //           \"humidity\": \"92\"\n  //       },\n  //       \"timestamp\": \"2/13/2023\",\n  //       \"lat\": \"41.86579351612219\"\n  //   }\n  // }\n\n  // Understand this and you will understand the meaning of life\n  useEffect(()=> {                          // changed to use memo so it doesn't wait for a render\n    setData(generateMockData());          // set the data on the initial load\n  }, []);\n\n  // access data, make sure its loaded first though\n  if(data != undefined)\n  {\n    console.log(data);            // you'll notice this stuff prints twice, since React.Strict is on it will render twice\n    // console.log(data[\"KONGDOG\"]); // see -> shorturl.at/cwER3  \n    // console.log(data[\"KONGDOG\"][\"long\"]); // etc. etc...\n    // console.log(data[\"KONGDOG\"][\"data\"][\"pm25\"]);\n  }\n  \n  \n  return (\n    <div id='map'>\n        <MapContainer center={[41.86877130657323, -87.64863209188573]} zoom={16} scrollWheelZoom={false}>\n            <TileLayer\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"/>\n            <Marker position={[41.86877130657323, -87.64863209188573]}>\n                <Popup>\n                   University of Illinois-Chicago\n                </Popup>\n            </Marker>\n        </MapContainer>\n    </div>\n  );\n}\n\nexport default MapDiv;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,OAAO,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,YAAY,QAAQ,4BAA4B;AACzD,SAASC,MAAM,QAAQ,sBAAsB;AAC7C,SAASC,KAAK,QAAQ,qBAAqB;AAC3C,SAASC,SAAS,QAAQ,yBAAyB;AACnD,SAASC,MAAM,QAAQ,qBAAqB;AAE5C,OAAO,gBAAgB;AAEvB,SAASC,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,SAASC,EAAE,QAAQ,kBAAkB;AAAA;AAErC,SAASC,MAAM,GAAG;EAAA;EAEhB;EACA;EACA,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,EAAE;;EAElC;EACA;EACA;;EAEA;EACA;;EAEA;;EAEA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACAD,SAAS,CAAC,MAAK;IAA2B;IACxCY,OAAO,CAACJ,gBAAgB,EAAE,CAAC,CAAC,CAAU;EACxC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,IAAGG,IAAI,IAAIE,SAAS,EACpB;IACEC,OAAO,CAACC,GAAG,CAACJ,IAAI,CAAC,CAAC,CAAY;IAC9B;IACA;IACA;EACF;;EAGA,oBACE;IAAK,EAAE,EAAC,KAAK;IAAA,uBACT,QAAC,YAAY;MAAC,MAAM,EAAE,CAAC,iBAAiB,EAAE,CAAC,iBAAiB,CAAE;MAAC,IAAI,EAAE,EAAG;MAAC,eAAe,EAAE,KAAM;MAAA,wBAC5F,QAAC,SAAS;QACV,WAAW,EAAC,yFAAyF;QACrG,GAAG,EAAC;MAAoD;QAAA;QAAA;QAAA;MAAA,QAAE,eAC1D,QAAC,MAAM;QAAC,QAAQ,EAAE,CAAC,iBAAiB,EAAE,CAAC,iBAAiB,CAAE;QAAA,uBACtD,QAAC,KAAK;UAAA,UAAC;QAEP;UAAA;UAAA;UAAA;QAAA;MAAQ;QAAA;QAAA;QAAA;MAAA,QACH;IAAA;MAAA;MAAA;MAAA;IAAA;EACE;IAAA;IAAA;IAAA;EAAA,QACb;AAEV;AAAC,GA/DQD,MAAM;AAAA,KAANA,MAAM;AAiEf,eAAeA,MAAM;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}